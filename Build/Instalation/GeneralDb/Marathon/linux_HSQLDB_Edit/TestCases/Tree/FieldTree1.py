useFixture(default)

def test():
	from Modules import commonBits
	java_recorded_version = '1.5.0_11'

	if window('Record Editor'):
		select('FileChooser', commonBits.sampleDir() + 'DTAR020.bin')
		commonBits.setRecordLayout(select, 'DTAR020')
		click('Edit1')
		select('Table', 'rows:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],columns:[9 - 2|STORE-NO,11 - 4|DATE]')
		select_menu('View>>Field Based Tree')
##		select('Table1', 'rows:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],columns:[9 - 2|STORE-NO,11 - 4|DATE]')
		select('List', 'DTAR020')
		select('ComboBox', 'Selected Records')
		select('Table', 'STORE-NO', 'Field,0')
		select('Table', 'DEPT-NO', 'Field,1')
		select('Table', 'cell:Field,1(DEPT-NO)')
		click('Build Tree')
		select('JTreeTable', 'cell:KEYCODE-NO,1(null)')
		assert_p('JTreeTable', 'RowCount', '3')
		select('JTreeTable', 'cell:KEYCODE-NO,1(null)')
		rightclick('JTreeTable', 'KEYCODE-NO,2')
		select_menu('Expand Tree')
		select('JTreeTable', 'cell:Tree,3(null)')
		assert_p('JTreeTable', 'RowCount', '6')
		select('JTreeTable', 'cell:Tree,3(null)')
		rightclick('JTreeTable', 'Tree,4')
		select('JTreeTable', 'cell:Tree,4(null)')
		rightclick('JTreeTable', 'Tree,4')
		select_menu('Expand Tree')
		select('JTreeTable', 'cell:KEYCODE-NO,5(69644164)')
		assert_p('JTreeTable', 'Content', '[[, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , 69644164, 166, 40118, 193, 1, 21.59], [, , , , , , , ]]')
		select('JTreeTable', 'cell:Tree,3(null)')
		rightclick('JTreeTable', 'Tree,3')
		select_menu('Expand Tree')
		select('JTreeTable', 'cell:KEYCODE-NO,4(69694814)')
		assert_p('JTreeTable', 'Content', '[[, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , 69694814, 166, 40118, 360, 1, 2.50], [, , 69694814, 166, 40118, 360, 1, 2.50], [, , , , , , , ], [, , 69644164, 166, 40118, 193, 1, 21.59], [, , , , , , , ]]')
		select('JTreeTable', 'cell:KEYCODE-NO,1(null)')
		rightclick('JTreeTable', 'KEYCODE-NO,1')
		select_menu('Expand Tree')
		select('JTreeTable', 'cell:KEYCODE-NO,4(null)')
		assert_p('JTreeTable', 'RowCount', '18')
		select('JTreeTable', 'cell:KEYCODE-NO,5(null)')
		rightclick('JTreeTable', 'KEYCODE-NO,5')
		select_menu('Expand Tree')
		select('JTreeTable', 'cell:KEYCODE-NO,6(60614487)')
		assert_p('JTreeTable', 'Content', '[[, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , 60614487, 59, 40118, 878, 1, 5.95], [, , 63644339, 59, 40118, 878, 1, 12.65], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , 69694814, 166, 40118, 360, 1, 2.50], [, , 69694814, 166, 40118, 360, 1, 2.50], [, , , , , , , ], [, , 69644164, 166, 40118, 193, 1, 21.59], [, , , , , , , ]]')
		select('JTreeTable', 'cell:KEYCODE-NO,13(null)')
		rightclick('JTreeTable', 'KEYCODE-NO,13')
		select_menu('Collapse Tree')
		select('JTreeTable', 'cell:KEYCODE-NO,7(63644339)')
		assert_p('JTreeTable', 'RowCount', '14')
		select('JTreeTable', 'cell:Tree,10(null)')
		rightclick('JTreeTable', 'KEYCODE-NO,10')
		select_menu('Expand Tree')
		select('JTreeTable', 'cell:KEYCODE-NO,11(67674686)')
		assert_p('JTreeTable', 'Content', '[[, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , 60614487, 59, 40118, 878, 1, 5.95], [, , 63644339, 59, 40118, 878, 1, 12.65], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ], [, , 67674686, 59, 40118, 929, 1, 3.99], [, , , , , , , ], [, , , , , , , ], [, , , , , , , ]]')
		select('JTreeTable', 'cell:KEYCODE-NO,10(null)')
		rightclick('JTreeTable', 'KEYCODE-NO,10')
		select_menu('Collapse Tree')
		select('JTreeTable', 'cell:KEYCODE-NO,9(null)')
		assert_p('JTreeTable', 'RowCount', '14')
	close()
