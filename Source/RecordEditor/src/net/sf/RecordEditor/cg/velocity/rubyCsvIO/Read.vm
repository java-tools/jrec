require 'csv'
#set ($schemaDef = ${generateOptions.schemaDefinition})
#set ($r = ${generateOptions.schemaDefinition.getRecords().get(0)})
#
#  Generated by the ${SourceApplication.getApplicationId()} (${SourceApplication.getWebsite()})
#  on the ${generateOptions.getTemplateDtls().currentDateTime}
#
#set ($q = "${generateOptions.schemaDefinition.schema.getQuoteDetails().asString()}")
#if ($q == "'")
#*  *##set ($q = ", quote_char: '\\''")
#elseif ($q != "")
#set ($q = ", quote_char: '${q}'")
#end

#if (${generateOptions.schemaDefinition.areThereColumnNames()})
   CSV.foreach('${generateOptions.getDataFileName().getEscapedFileName()}'${q},
               col_sep: '${generateOptions.schemaDefinition.getDelimiter()}', row_sep: :auto, headers: true) do |row|
#set ($sep = "puts      ")
#*  *##foreach($f in ${r.getFields(11)})
      ${sep} row['${f.cobolName}'].to_s \
#set ($sep = "   + ' ' +")
#*  *##end
         + ''
   end
#else
   CSV.foreach('${generateOptions.getDataFileName().getJavaFileName().getEscapedFileName()}'${q}, col_sep: '${generateOptions.schemaDefinition.getDelimiter()}', row_sep: :auto, headers: true) do |row|
      puts row
   end
#end